\input macros
\input cstuff
\headline{{\bf CECS 472\hfill Homework 5 \hfill Fall 2004}}
\footline{Dennis Volper \hfill 15 September 2004 (Week 3 Lecture 2) \hfill
Due: 20 September 2004 (Week 4, Lab 1)}
\parindent 0pt

Purpose: This is designed to familiarize you with UDP clients.

Build a UDP daytime client in a file called {\ltt{}UDPdaytime.c}.

Use the main program--client procedure format found
in the UDP echo client.
The default service should {\ltt{}"daytime"}.
I recommend  getting a copy of the UDP echo client and
replacing the {\ltt{}UDPecho} procedure of this client
with a {\ltt{}UDPdaytime} procedure.

This {\ltt{}UDPdaytime} procedure will send a message
to the ``host", read the reply (into a buffer)
and print the reply.
Because this is daytime, the reply is a string, so use
a buffer big enough to receive the entire string;
128 bytes is a good size.

{\ltt{}~volper/classes/472/comer_examples/UDPecho.c}
contains the UDP echo client (you don't have to retype it).
You will also need copies of Comer's {\ltt{}connectUDP},
{\ltt{}connectsock}, {\ltt{}errexit} and {\ltt{}strerror}
files.
I recommend you copy down all the files in the {\ltt{}comer_examples}
directory.
Compile a copy of the {\ltt{}UDPecho} and make sure it runs.
{\ltt{}gcc UDPecho.c} should be sufficient to do this.
Then make a copy called {\ltt{}UDPdaytime.c} and modify it.

Hint: the send a message, read a reply format is what
was used by the UDP time example.
Remember, the daytime reply is a string;
the time reply was an integer, so what you do to print
the reply is different.

UDP packets might get lost.
If this happens, your client (being very simple) will freeze;
that's OK, we will learn advanced techniques that avoid this
later in the course.
For now, use control-C to kill the client if it freezes.

Testing: aim your client at a variety of machines, including,
{\ltt{}lab38}, {\ltt{}lab77}, {\ltt{}panther} and {\ltt{}cheetah}.

Hopefully, {\ltt{}cheetah} will drop packets so you can see your
client freeze. 
If it doesn't, aim at {\ltt{}aardvark}.
UDP packets to it  will always get
dropped because of our firewalls.

Submit: a printout of your {\ltt{}UDPdaytime.c} file.

Instructor Testing:
You are required to leave a copy of this file in your home directory
(not in a subdirectory).
I will use a script to test your program; it will copy you program
to one of my directories, compile and run it.
The copy (and test) will fail if your do not have the copy in
the correct place or it has the wrong name.
\bye
