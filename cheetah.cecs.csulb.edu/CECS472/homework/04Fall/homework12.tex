\input macros
\input cstuff
\headline{{\bf CECS 472\hfill Project 12 \hfill Fall 2004}}
\footline{Dennis Volper \hfill 13 October 2004 (Week 7 Lecture 2)\hfill 
Due: 18 October 2004 (Week 8 Lecture 1)}
\parindent 0pt

Purpose: This assignment reviews the select and emphasized the
topics covered in 13b.
You will build a (multi-user) chat client.
Your client will connect to the concurrent connection-oriented single process
server developed in the previous assignment.

{\it THE CHAT CLIENT}

When started, the client will open a TCP connection to the server.
Whatever the client sees the user type will be sent to the server 
(i.e., the client gets a line from the keyboard, 
then sends that line to the server).
Whatever the client recvs from the server will be printed on the screen
(i.e., the client recvs from the socket, 
then prints what it has recv'd to the screen).
Typing control-D (EOF from keyboard) should cause the client to 
shutdown the socket for further writes, and recv from the socket until
it gets an end of file from the server, then exit.
An easy way to do this is when EOF or error is reported on the socket, exit.
This takes care of both the graceful shutdown and the error exit
with the same code.

Since input comes from both the keyboard and the socket your client
must use select.

{\bf Submit:} The a fully commented copy (print-out) of the source code for the 
client.
In addition,
the source code for the client must be placed in your home directory
in a file named {\ltt{}chatc.c}.

Do not submit a copy of your the server,
you did that for the previous assignment.

Note 1: We don't really test the use of the shutdown; I'll have to
check the source code by hand to make sure you used it.

Note 2: The emphasis not on the user interface.
Use the same user interface (basically ``none") found in my client
that you used to test your code in the previous assigment.

Note 3: Remember that {\ltt{}fgets} returns {\ltt{}NULL} on end
of input from the keyboard.

Note 4: This homework is called 12b because the instructor
skipped number 11 and needs to get back on track.
This is the real number 12, the previous number 12 should have been
number 11.
\bye
