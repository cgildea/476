\def\chapternumber{CECS 472, Ethernet --- Volper -- 19 June 1996}
\input slides.tex
\input cstuff.tex
\centerline{\bbf Internet Packet on Ethernet}
\centerline{Packet Contents}

{\railroadfont
.PS
boxht=0.7i
Pr: box wid 1.25i "Preamble"
"64 bits" at Pr.n above
Da: box wid 1.1i with .w at last box.e "Dest." "Address"
"48 bits" at Da.n above
Sa: box wid 1.1i with .w at last box.e "Source" "Address"
"48 bits" at Sa.n above
Ft: box wid 0.75i with .w at last box.e "Frame" "Type"
"16 bits" at Ft.n above
Dt: box wid 2.0i with .w at last box.e "IP" "Packet"
"368-12000 bits" at Dt.n above
Cr: box wid 0.7i with .w at last box.e "CRC"
"32 bits" at Cr.n above
Ip1: box wid 6.4i with .nw at Pr.sw + (0, -0.8i)
"32 bits" at Ip1.n above
Ves: box wid 0.8i with .w at Ip1.w "vers"
Hlen: box wid 0.8i with .w at last box.e "header" "length"
Ser: box wid 1.6i with .w at last box.e "service" "type"
Tot: box wid 3.2i with .w at last box.e "total" "length"
Ide: box wid 3.2i with .nw at Ves.sw "identification"
Flag: box wid 0.8i with .w at last box.e "flags"
Offset: box wid 2.4i with .w at last box.e "fragment" "offset"
Ttl: box wid 1.6i with .nw at Ide.sw "time" "to live"
Prot: box wid 1.6i with .w at last box.e "protocol"
Cksum: box wid 3.2i with .w at last box.e "header" "checksum"
Ipsa: box wid 6.4i with .nw at Ttl.sw "IP source address"
Ipda: box wid 6.4i with .nw at Ipsa.sw "IP destination address"
Ipop: box wid 4.8i with .nw at Ipda.sw "IP options (optional)"
Padd: box wid 1.6i with .w at last box.e "padding"
Data: box wid 6.4i with .nw at Ipop.sw "Data ..."
line -> from Dt.sw to Ip1.nw
line -> from Dt.se to Ip1.ne
.PE
\centerline{\box\graph}}
\vt
Offset: data may span several packets, 
\break
header is repeated on each packet

\newslide
\centerline{\bbf Ethernet IEEE 802.3}
\centerline{How a Particular Protocol Works}

Preamble (Start): 7 octets alternating 0/1's, sdf octet
(synchronization)

Addresses: 6 octets

Type: 2 octets (indicates protocol, e.g., IP, DECNET)

Data: 46--1500 octets

CRC: 8 octets

10 Mbit / sec
\vt
Bus architecture with contention
\break
packets can collide

Capacity: up to 96\% of channel

At 30\%: 2.5\% wait, 0.2\% collide.

Advantages: Good for a single large transfer.
No net monitor or master needed.
Stations easy to add/remove.

Disadvantages: Clogs under heavy load.
Problems hard to isolate.

The larger the packet, the better the use of capacity.
\newslide
\centerline{\bbf Special Modes}
\vt
{\bit Broadcast}:

Allowable on both token ring and ethernet.

Ethernet: address = all 1's.
\vt
{\bit Receive all}:

An ethernet card can be set to receive all packets, not just those
with its address (network monitoring).
\newslide
\centerline{\bbf Ethernet Cabling Rules}

2 repeaters (3 cables) = limits ``radius"
\break
4 repeaters (5 cables) = two cables ``empty"

10 base 5 (thick net)---
\break
1000m point-to-point, \quad 500m bus.
\break
100 stations per cable, \quad 

10 base 2 (thin net)---
\break
500m point-to-point, \quad 200m bus.
\break
30 stations per cable, \quad 0.5m min.

10 base T (twisted pair)--- 
\break
point-to-point 125m

10 broad 36 -- Ethernet modem (broadband transceiver)
\vt
star configurations = more segments
\break
multiport repeaters available
\break
too many segments connected = collisions
\newslide
\centerline{\bbf CSMA/CD}

Carrier Sense Multiple Access/Collision Detect

Signaling: Baseband using half-pulse
(a transition occurs at the middle of each pulse)
\break
0: 1 for first half pulse, 0 for second half.
\break
1: 0 for first half pulse, 1 for second half.

Effect: a signal in progress can be detected.

If you are ready to send
\break
- if no one is already sending, send
\break
- if some one is already sending, wait until they are
done, plus a safety margin (inter-frame gap) 
\newslide
\centerline{\bbf Collision Detection}

Collision: two stations send at the ``same" time
\break
Result: the packets interfere
\break
Senders responsibility to detect a collision:
what I'm sending is not the only thing I see on the cable.

Complication: Propagation time--Cable length
\break
-two times close to each other are the ``same"

transmission time $>$ 2 * propagation time
\break
packet length $>$ 2 * cable length
\break
-sender knows if there was a collision before the end of transmission

on collision detection sender immediately emits ``jamming" signal ensure all 
stations know of the collision (it doesn't finish transmitting the packet)
\newslide
\centerline{\bbf Collision Handling}

Wait a random amount; then retransmit
\break
-colliding stations are unlikely to choose the same random amount

Second collision: Exponential back off
\break
-``double" the random amount
\break
--double the mean of the random number and generate a new random number
\break
repeat doubling for each collision
\break
-after 16 collisions (no success), give up

Star architectures (10baseT)
\break
Repeater sees two simultaneous active inputs
\break
Repeater generates collision signal
\break
Repeaters propagate collision signal (multiple stars)
\vt
\centerline{\bbf Ethernet restrictions}

- 1) due to attenuation
\break
-- Maximum number of stations, maximum length
\break
- 2) maximum propagation time
\break
-- Maximum length; maximum number of repeaters
\break
- 3) minimum transmission time
\break
-- Minimum packet size: 64 bytes (72 with preamble)
\newslide
\centerline{\bbf Ethernet Details}

Minimum packet size = 57.6$\mu$sec (72 bytes = 576 bits)

Propagation delay requirement $< 28.8\mu$sec

Propagation delays
\break
-Cable: 200m/$\mu$sec (5$\mu$sec/km)
\break
-Repeater: 8 bits (0.8$\mu$sec/repeater)

Notes: bit to bit distance = 20m of cable

5/4 thicknet = 12.5$\mu$sec cable + 3.2$\mu$sec repeaters
\vt
Collision signal (jamming): 62-bits, alternating 0/1

Inter-frame gap: 96 bits (9.6$\mu$sec at 10Mbs)
\bye
