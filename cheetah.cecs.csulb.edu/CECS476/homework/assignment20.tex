\input macros
\rightskip=0pt plus 1fill
\input cstuff
\headline{{\bf CECS 476\hfill Assignment 20\hfill Spring 2014}}
\footline{Nathan Pickrell \hfill 8 April 2014 (Week 11 Lecture 1)\hfill 
Due: 10 April 2014 (Week 11, Lab 2)}
\parindent 0pt

Questions 1 and 2 cover SUID programs.
While doing questions 1 and 2 you should NOT be root.

You must pay particular attention to which user you are when
doing the parts of this project. Be sure you are the user
you are instructed to be at each step of the project.

As bob: get a copy of {\ltt{}~djv/clogit.c} and compile it.
Name the compiled version {\ltt{}clogit}.
Don't forget to look at it to see what it does.
Create a file called {\ltt{}datelog} to be mode 600 and
change the {\ltt{}clogit} command to be SUID and executable
by everyone (mode 4711).

Login as your account: run clogit.

1) Report: the last two lines in the datelog

Verify security: try doing the same thing by creating (as bob) a shell
script that writes to the file using "echo" commands.
(Don't be particular about the exact things you echo.)
Make the shell script SUID.

Login as your account: run the shell script.

2) Report: what happens.

Examine the {\ltt{}login.defs} file on your machine.

If you want to enable time restrictions on logins, a
variable needs to be set and a file needs to be modified.
\hfill\break
3) Report the variable and the file name.

If a home directory for a user cannot be found when that user attempts to
login, the user may or may not be allowed to complete the login
4) Report the name of the variable that controls this behavior

Make (and test) the following modifications to your {\ltt{}login.defs} file:
\hfill\break
a) Log all su activity
\hfill\break
b) Limit {\ltt{}su} to {\ltt{}root} to be from group 0 only.
To test this, add {\ltt{}bob} to group 0, but do not add your account,
make sure {\ltt{}bob} can su and you cannot.

5) Report: the changes you made and the last line of your su log.

On {\ltt{}cheetah} examine the login history.

6) Report: Ignoring your account, who where the last 3 logins, to what
accounts, what hours were they on and where did they login from.

Use iptables to block ssh into your machine from {\ltt{}panther} only.
To test this, try to ssh into your machine from both panther
and cougar.

7) Report: The command you issued.

Clean up: flush all iptables entries.
\bye
