\input macros
\rightskip=0pt plus 1fill
\input cstuff
\headline{{\bf CECS 476\hfill Homework 5 \hfill Spring 2008}}
\footline{Dennis Volper \hfill 11 February 2008 (Week 3 Lecture 1)\hfill 
Due: 13 February 2008 (Week 3 Lab 2)}
\parindent 0pt

Purpose: This assignment covers disk and file system administration.

Submission: You will submit a written document.

1) On the machine you administer there is a second drive.
It should be {\ltt{}hdc}, if you don't locate such a disk
try {\ltt{}hdb} and let the instructor so he can
open the case and swap the cables around

Run {\ltt{}fdisk} on {\ltt{}hdc} to remove all existing partitions and
two create two partitions.
The first partition should use about 10 percent of the
disk, and the second partition should contain the remainder.
Change the type of the first partition to linux swap.
(You can have {\ltt{}fdisk} give you a list of partition codes that it uses.)

While running {\ltt{}fdisk} make sure the second parition
you created is marked as ``linux native", this is almost always the
default when you make a partition, but it is always worth checking
when using a version of {\ltt{}fdisk} you haven't used before.
Save your partition table.

Run {\ltt{}mke2fs} to build 
an ext2 file system on the second disk partition (the large
one) and attach that file system as {\ltt{}/newdisk}.
Be careful not to modify (or damage) your main drive
which is {\ltt{}hda} or you will destroy your system.

Now mount the file system you just created by hand
(this is the safest way to make sure it is set up right).

Submit: 
1a) a brief description what you did with {\ltt{}fdisk} and
a listing of your partition table.
1b) the exact form of the {\ltt{}mount} command you used and
the disk free {\ltt{}df} report on the new file system.

2) Modify your system so that the mount will 
occur automatically at boot.

Submit: the line you added to your {\ltt{}fstab}.

{\bf Bring in one already formated DOS floppy.}

3) On your formatted, set-up a ext2 file system;
Make an entry in {\ltt{}fstab} that allows any user insert and 
mount an ext2 floppy using {\ltt{}/mnt} as the mount point.
Change the permissions on {\ltt{}/mnt} to 777 ({\ltt{}chmod 777 /mnt}).
Login as bob (not root), put your ext2 floppy
in the drive,
mount it, copy a file to the floppy, unmount and remove the floppy.

Submit: the line you entered into {\ltt{}fstab} and
the exact mount command you used.

4) As the system administrator: run an {\ltt{}fsck} on your floppy. 
{\it Remember:} Unix wants the file system being checked to be unmounted,
so it is not changing while the check is performed.

Submit: the exact command you used and summarize what the command output.

Clean up: change the permissions on {\ltt{}/mnt} back to 755.

Note: the first smaller partition you created on your harddrive
in this assignment will be used in the next assigment.
\bye
